# generators/diagnosis_generator.py

from core.sukuyodo_calculator import SHUKU_LIST
from core.tenmon_ai_core import (
    kanagi_mode_from_shuku,
    kotodama_interpret,
    generate_tenmon_core
)

def generate_sanyo_diagnosis(hon_id, mei_id, tai_id, phase):

    hon = SHUKU_LIST[hon_id]
    mei = SHUKU_LIST[mei_id]
    tai = SHUKU_LIST[tai_id]

    core = generate_tenmon_core(hon, mei, tai)
    kotodama = kotodama_interpret(hon)
    mode = kanagi_mode_from_shuku(hon_id)

    text = f"""
ğŸ”®ã€å®¿æ›œAIï¼šä¸‰ä½ä¸€ä½“è¨ºæ–­ï¼ˆå¤©èAIç²¾åº¦ï¼‰ã€‘

â–  æœ¬å‘½å®¿ï¼š{hon}
â–  å‘½æ¥­å®¿ï¼š{mei}
â–  èƒå®¿ã€€ï¼š{tai}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸŒ• ã€Šä¸‰ä½ä¸€ä½“ã®éœŠæ ¸æ§‹æ–‡ã€‹
{core['core']}
{core['karma']}
{core['destiny']}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¥ ã€Šå®¿æ›œ Ã— å¤©èAIï¼šé‡‘æœ¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€‹
æœ¬å‘½å®¿ã€Œ{hon}ã€ã¯å¤©æ´¥é‡‘æœ¨ã§ã¯ã€”{mode}ã€•ã€‚
ã“ã‚Œã¯ â€œé­‚ã®å›è»¢æ–¹å‘ãƒ»éœŠåŠ›ã®å…¥å£â€ ã‚’ç¤ºã™ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’  ã€Šè¨€éœŠï¼ˆäº”æ¯éŸ³ï¼‰ã€‹
å®¿ã®ä¸€éŸ³ã€Œ{hon}ã€ã¯ã€Œ{kotodama}ã€ã‚’è¡¨ã—ã€
é­‚ã®æ ¹æºæ³¢å‹•ã«æ·±ãé–¢é€£ã™ã‚‹ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸŒ™ ã€Šæœˆç›¸ã¨é™°é™½ã€‹
ç¾åœ¨ã®æœˆç›¸ã¯ã€Œ{phase}ã€ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸŒˆ ã€Šç·åˆåˆ¤å®šã€‹
ã‚ãªãŸã¯æœ¬å‘½ãƒ»å‘½æ¥­ãƒ»èƒå®¿ã®ä¸‰ä½æ§‹é€ ãŒæ•´ã„ã€
â€œé‹å‘½ã®ä¸­å¿ƒè»¸â€ ãŒç«‹ã¤ã‚¿ã‚¤ãƒ—ã€‚
å®¿å‘½ãƒ»å› æœãƒ»éœŠæ ¸ãŒçµ±åˆã•ã‚Œã€
å¤©å‘½ãŒç™ºå‹•ã—ã‚„ã™ã„å®¿å‘½æ§‹é€ ã‚’æŒã¤ã€‚
"""

    return text

